<div class="countdown" id="countdown-{{ block.id }}">
  <div class="time-box"><span id="days-{{ block.id }}">00</span></div> :
  <div class="time-box"><span id="hours-{{ block.id }}">00</span></div> :
  <div class="time-box"><span id="minutes-{{ block.id }}">00</span></div> :
  <div class="time-box"><span id="seconds-{{ block.id }}">00</span></div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const targetDate = new Date("{{ block.settings.choose_date }}T12:00:00").getTime();

    const daysEl = document.getElementById("days-{{ block.id }}");
    const hoursEl = document.getElementById("hours-{{ block.id }}");
    const minutesEl = document.getElementById("minutes-{{ block.id }}");
    const secondsEl = document.getElementById("seconds-{{ block.id }}");

    function updateCountdown() {
      const now = new Date().getTime();
      const gap = targetDate - now;

      if (gap < 0) {
        daysEl.textContent = "00";
        hoursEl.textContent = "00";
        minutesEl.textContent = "00";
        secondsEl.textContent = "00";
        return;
      }

      const second = 1000;
      const minute = second * 60;
      const hour = minute * 60;
      const day = hour * 24;

      const d = Math.floor(gap / day);
      const h = Math.floor((gap % day) / hour);
      const m = Math.floor((gap % hour) / minute);
      const s = Math.floor((gap % minute) / second);

      daysEl.textContent = String(d).padStart(2, '0');
      hoursEl.textContent = String(h).padStart(2, '0');
      minutesEl.textContent = String(m).padStart(2, '0');
      secondsEl.textContent = String(s).padStart(2, '0');
    }

    updateCountdown(); // Initial run
    setInterval(updateCountdown, 1000); // Update every second
  });
</script>



{% stylesheet %}
  .countdown {
    font-size: 48px;
    font-weight: bold;
    letter-spacing: 5px;
    color: var(--color-primary-button-hover-background);
    @media(max-width: 768px){
      font-size: 34px;
      font-weight: 700;
      letter-spacing: 0px;
    }
  }
  .label {
    font-size: 16px;
    display: block;
    text-align: center;
    color: #999;
  }
  .time-box {
    display: inline-block;
    margin: 0px;
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "Timer Countdown",
    "tag": null,
    "settings": [
      {
        "type": "text",
        "id": "choose_date",
        "label": "Day",
        "default": "2025-07-20",
        "info": "Set the date (year-month-day) like: 2025-07-20"
      },
      {
        "type": "header",
        "content": "t:content.layout"
      },
      {
        "type": "select",
        "id": "width",
        "label": "t:settings.width",
        "options": [
          {
            "value": "fit-content",
            "label": "t:options.fit"
          },
          {
            "value": "100%",
            "label": "t:options.fill"
          }
        ],
        "default": "fit-content"
      },
      {
        "type": "select",
        "id": "max_width",
        "label": "t:settings.max_width",
        "options": [
          {
            "value": "narrow",
            "label": "t:options.narrow"
          },
          {
            "value": "normal",
            "label": "t:options.normal"
          },
          {
            "value": "none",
            "label": "t:options.none"
          }
        ],
        "default": "normal"
      },
      {
        "type": "text_alignment",
        "id": "alignment",
        "label": "t:settings.alignment",
        "default": "left",
        "visible_if": "{{ block.settings.width == '100%' }}"
      },
      {
        "type": "header",
        "content": "t:content.typography"
      },
      {
        "type": "select",
        "id": "type_preset",
        "label": "t:settings.preset",
        "options": [
          {
            "value": "rte",
            "label": "t:options.default"
          },
          {
            "value": "paragraph",
            "label": "t:options.paragraph"
          },
          {
            "value": "h1",
            "label": "t:options.h1"
          },
          {
            "value": "h2",
            "label": "t:options.h2"
          },
          {
            "value": "h3",
            "label": "t:options.h3"
          },
          {
            "value": "h4",
            "label": "t:options.h4"
          },
          {
            "value": "h5",
            "label": "t:options.h5"
          },
          {
            "value": "h6",
            "label": "t:options.h6"
          },
          {
            "value": "custom",
            "label": "t:options.custom"
          }
        ],
        "default": "rte",
        "info": "t:info.edit_presets_in_theme_settings"
      },
      {
        "type": "select",
        "id": "font",
        "label": "t:settings.font",
        "options": [
          {
            "value": "var(--font-body--family)",
            "label": "t:options.body"
          },
          {
            "value": "var(--font-subheading--family)",
            "label": "t:options.subheading"
          },
          {
            "value": "var(--font-heading--family)",
            "label": "t:options.heading"
          },
          {
            "value": "var(--font-accent--family)",
            "label": "t:options.accent"
          }
        ],
        "default": "var(--font-body--family)",
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "font_size",
        "label": "t:settings.size",
        "options": [
          {
            "value": "",
            "label": "t:options.default"
          },
          {
            "value": "0.625rem",
            "label": "10px"
          },
          {
            "value": "0.75rem",
            "label": "12px"
          },
          {
            "value": "0.875rem",
            "label": "14px"
          },
          {
            "value": "1rem",
            "label": "16px"
          },
          {
            "value": "1.125rem",
            "label": "18px"
          },
          {
            "value": "1.25rem",
            "label": "20px"
          },
          {
            "value": "1.5rem",
            "label": "24px"
          },
          {
            "value": "2rem",
            "label": "32px"
          },
          {
            "value": "2.5rem",
            "label": "40px"
          },
          {
            "value": "3rem",
            "label": "48px"
          },
          {
            "value": "3.5rem",
            "label": "56px"
          },
          {
            "value": "4.5rem",
            "label": "72px"
          },
          {
            "value": "5.5rem",
            "label": "88px"
          },
          {
            "value": "7.5rem",
            "label": "120px"
          },
          {
            "value": "9.5rem",
            "label": "152px"
          },
          {
            "value": "11.5rem",
            "label": "184px"
          }
        ],
        "default": "1rem",
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "line_height",
        "label": "t:settings.line_height",
        "options": [
          {
            "value": "tight",
            "label": "t:options.tight"
          },
          {
            "value": "normal",
            "label": "t:options.normal"
          },
          {
            "value": "loose",
            "label": "t:options.loose"
          }
        ],
        "default": "normal",
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "letter_spacing",
        "label": "t:settings.letter_spacing",
        "options": [
          {
            "value": "tight",
            "label": "t:options.tight"
          },
          {
            "value": "normal",
            "label": "t:options.normal"
          },
          {
            "value": "loose",
            "label": "t:options.loose"
          }
        ],
        "default": "normal",
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "case",
        "label": "t:settings.case",
        "options": [
          {
            "value": "none",
            "label": "t:options.default"
          },
          {
            "value": "uppercase",
            "label": "t:options.uppercase"
          }
        ],
        "default": "none",
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "wrap",
        "label": "t:settings.wrap",
        "options": [
          {
            "value": "pretty",
            "label": "t:options.pretty"
          },
          {
            "value": "balance",
            "label": "t:options.balance"
          },
          {
            "value": "nowrap",
            "label": "t:options.none"
          }
        ],
        "visible_if": "{{ block.settings.type_preset == 'custom' }}"
      },
      {
        "type": "select",
        "id": "color",
        "label": "t:settings.color",
        "options": [
          {
            "value": "var(--color-foreground)",
            "label": "t:options.text"
          },
          {
            "value": "var(--color-foreground-heading)",
            "label": "t:options.heading"
          },
          {
            "value": "var(--color-primary)",
            "label": "t:options.link"
          }
        ],
        "default": "var(--color-foreground)",
        "visible_if": "{{ block.settings.type_preset != 'rte' }}"
      },
      {
        "type": "header",
        "content": "t:content.appearance"
      },
      {
        "type": "checkbox",
        "id": "background",
        "label": "t:settings.background",
        "default": false
      },
      {
        "type": "color",
        "id": "background_color",
        "label": "t:settings.background_color",
        "alpha": true,
        "default": "#00000026",
        "visible_if": "{{ block.settings.background }}"
      },
      {
        "type": "range",
        "id": "corner_radius",
        "label": "t:settings.corner_radius",
        "default": 0,
        "min": 0,
        "max": 50,
        "step": 1,
        "visible_if": "{{ block.settings.background }}"
      },
      {
        "type": "header",
        "content": "t:content.padding"
      },
      {
        "type": "range",
        "id": "padding-block-start",
        "label": "t:settings.top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding-block-end",
        "label": "t:settings.bottom",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding-inline-start",
        "label": "t:settings.left",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding-inline-end",
        "label": "t:settings.right",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "default": 0
      }
    ],
    "presets": [
      {
        "name": "Timer Countdown"
      }
    ],
  }
{% endschema %}